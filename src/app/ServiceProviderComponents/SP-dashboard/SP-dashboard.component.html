<div class="admin-body" [class.dark-mode]="isDarkMode">
  <div class="admin-dashboard-container">

    <header class="admin-header">
      <h1>Operations Dashboard</h1>
      <span style="opacity: 0.9; font-size:2.5rem;text-transform: capitalize;">Welcome, {{ currentUserName
      }}</span>
    </header>

    <main class="admin-dashboard-grid">

      <div class="admin-card">
        <div class="card-accent-line line-blue"></div>
        <div class="admin-card-header">
          <h2>Live Requests</h2>
        </div>
        <div class="admin-card-content">
          <div class="item-wrapper">
            @for (req of liveRequests; track req; let i = $index) {
              <div class="admin-item">
                <div class="admin-item-details">
                  <h4>{{ req.userName }}</h4>
                  <p>{{ req.category }} â€¢ {{ req.userLocation }}</p>
                </div>
                <button (click)="dispatch(i)" class="admin-dispatch-button">
                  Dispatch
                </button>
              </div>
            }
          </div>
          @if (liveRequests.length === 0) {
            <p class="empty-state">No new requests pending.</p>
          }
        </div>
      </div>

      <div class="admin-card">
        <div class="card-accent-line line-purple"></div>
        <div class="admin-card-header">
          <h2>Active Jobs</h2>
        </div>
        <div class="admin-card-content">
          <div class="item-wrapper">
            @for (job of activeJobs; track job) {
              <div class="admin-item">
                <div class="admin-item-details">
                  <h4>{{ job.service }}</h4>
                  <p>{{ job.name }}</p>
                </div>
                <div class="admin-item-details" style="text-align: right;">
                  <p>Assigned to</p>
                  <h4 style="color: var(--accent-color)">{{ job.team }}</h4>
                </div>
              </div>
            }
          </div>
          @if (activeJobs.length === 0) {
            <p class="empty-state">No active jobs right now.</p>
          }
        </div>
      </div>

      <div class="admin-card">
        <div class="card-accent-line line-green"></div>
        <div class="admin-card-header">
          <h2>Team Status</h2>
        </div>
        <div class="admin-card-content">
          <div class="item-wrapper">
            @for (team of teams; track team) {
              <div class="admin-item">
                <div class="admin-item-details">
                  <h4>{{ team.name }}</h4>
                </div>
                            <div class="status-pill" [ngClass]="{
                                'status-available': team.status === 'Available',
                                'status-on-job': team.status === 'On Job',
                                'status-offline': team.status === 'Offline'
                            }">
                  <div class="status-dot"></div>
                  <span>{{ team.status }}</span>
                </div>
              </div>
            }
          </div>
        </div>
      </div>

    </main>
  </div>
</div>